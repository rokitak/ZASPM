(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,a){e.exports=a(395)},395:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(6),o=a.n(l),i=(a(193),a(122)),c=a.n(i),s=a(167),d=a(45),u=a(92),m=a(83),p=a(84),f=a(90),g=a(89),h=a(396),v=a(8),E=a(397),b=a(398),y=a(32),x=a(400),w=a(399),j=a(168),S=a(125),O=a(401),k=a(402),C=r.a.createContext(),I=O.a.create()(function(e){var t=e.form,a=(e.index,Object(S.a)(e,["form","index"]));return r.a.createElement(C.Provider,{value:t},r.a.createElement("tr",a))}),F=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={editing:!1},e.toggleEdit=function(){var t=!e.state.editing;e.setState({editing:t},function(){t&&e.input.focus()})},e.save=function(t){var a=e.props,n=a.record,r=a.handleSave;e.form.validateFields(function(a,l){a&&a[t.currentTarget.id]||(e.toggleEdit(),r(Object(d.a)(Object(d.a)({},n),l)))})},e.renderCell=function(t){e.form=t;var a=e.props,n=a.children,l=a.dataIndex,o=a.record,i=a.title;return e.state.editing?r.a.createElement(O.a.Item,{style:{margin:0}},t.getFieldDecorator(l,{rules:[{required:!0,message:"".concat(i," is required.")}],initialValue:o[l]})(r.a.createElement(k.a,{ref:function(t){return e.input=t},onPressEnter:e.save,onBlur:e.save}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24,minHeight:32},onClick:e.toggleEdit},n)},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=Object(S.a)(e,["editable","dataIndex","title","record","index","handleSave","children"]);return r.a.createElement("td",n,t?r.a.createElement(C.Consumer,null,this.renderCell):a)}}]),a}(r.a.Component),M=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleSave=function(e){var t=Object(u.a)(n.state.rows),a=t.findIndex(function(t){return e.key===t.key}),r=t[a];t.splice(a,1,Object(d.a)(Object(d.a)({},r),e)),n.setState({rows:t})},n.fileHandler=function(e){console.log("fileList",e);var t=e;return t?(console.log("fileObj.type:",t.type),"application/vnd.ms-excel"!==t.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==t.type?(n.setState({errorMessage:"Unknown file format. Only Excel files are uploaded!"}),!1):(Object(j.ExcelRenderer)(t,function(e,t){if(e)console.log(e);else{var a=[];if(t.rows.slice(1).map(function(e,t){e&&"undefined"!==e&&a.push({key:t,name:e[0],age:e[1],gender:e[2]})}),0===a.length)return n.setState({errorMessage:"No data found in file!"}),!1;n.setState({cols:t.cols,rows:a,errorMessage:null})}}),!1)):(n.setState({errorMessage:"No file uploaded!"}),!1)},n.handleSubmit=Object(s.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("submitting: ",n.state.rows);case 1:case"end":return e.stop()}},e)})),n.handleDelete=function(e){var t=Object(u.a)(n.state.rows);n.setState({rows:t.filter(function(t){return t.key!==e})})},n.handleAdd=function(){var e=n.state,t=e.count,a=e.rows,r={key:t,name:"User's name",age:"22",gender:"Female"};n.setState({rows:[r].concat(Object(u.a)(a)),count:t+1})},n.state={cols:[],rows:[],errorMessage:null,columns:[{title:"NAME",dataIndex:"name",editable:!0},{title:"AGE",dataIndex:"age",editable:!0},{title:"GENDER",dataIndex:"gender",editable:!0},{title:"Action",dataIndex:"action",render:function(e,t){return n.state.rows.length>=1?r.a.createElement(h.a,{title:"Sure to delete?",onConfirm:function(){return n.handleDelete(t.key)}},r.a.createElement(v.a,{type:"delete",theme:"filled",style:{color:"red",fontSize:"20px"}})):null}}]},n}return Object(p.a)(a,[{key:"checkFile",value:function(e){var t="";if(e&&e[0])return"application/vnd.ms-excel"===e[0].type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e[0].type||(t="You can only upload Excel file!"),console.log("file",e[0].type),e[0].size/1024/1024<2||(t="File must be smaller than 2MB!"),console.log("errorMessage",t),t}},{key:"render",value:function(){var e=this,t={body:{row:I,cell:F}},a=this.state.columns.map(function(t){return t.editable?Object(d.a)(Object(d.a)({},t),{},{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Importing Excel Component"),r.a.createElement(E.a,{gutter:16},r.a.createElement(b.a,{span:8,style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5%"}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{className:"page-title"},"Upload Farmer Data"))),r.a.createElement(b.a,{span:8},r.a.createElement("a",{href:"https://res.cloudinary.com/bryta/raw/upload/v1562751445/Sample_Excel_Sheet_muxx6s.xlsx",target:"_blank",rel:"noopener noreferrer",download:!0},"Sample excel sheet")),r.a.createElement(b.a,{span:8,align:"right",style:{display:"flex",justifyContent:"space-between"}},this.state.rows.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{onClick:this.handleAdd,size:"large",type:"info",style:{marginBottom:16}},r.a.createElement(v.a,{type:"plus"}),"Add a row")," ",r.a.createElement(y.a,{onClick:this.handleSubmit,size:"large",type:"primary",style:{marginBottom:16,marginLeft:10}},"Submit Data")))),r.a.createElement("div",null,r.a.createElement(x.a,{name:"file",beforeUpload:this.fileHandler,onRemove:function(){return e.setState({rows:[]})},multiple:!1},r.a.createElement(y.a,null,r.a.createElement(v.a,{type:"upload"})," Click to Upload Excel File"))),r.a.createElement("div",{style:{marginTop:20}},r.a.createElement(w.a,{components:t,rowClassName:function(){return"editable-row"},dataSource:this.state.rows,columns:a})))}}]),a}(n.Component);function A(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,null))}var N=document.getElementById("root");o.a.render(r.a.createElement(A,null),N)}},[[188,1,2]]]);
//# sourceMappingURL=main.e852384c.chunk.js.map